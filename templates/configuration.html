<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="/static/css/general.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <title>App Configuration</title>
</head>

<body>
<div class="app-navbar">
    <a href="https://spun.earth" class="logo"></a>
    <div class="menu">
        <ul>
            <li><a href="https://spun.earth">Spun Website</a></li>
        </ul>
    </div>
</div>

<div class="container mt-5">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="mt-3">
        {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        {% endfor %}
        </div>
    {% endif %}
    {% endwith %}

    <h2>Application Configuration</h2>
    <hr>

    {% set ns = namespace(remote_pipeline=None, description=None) %}

    {% for cfg in all_config %}
        {% if cfg.label == "remote_pipeline" %}
            {% set ns.remote_pipeline = cfg.value %}
            {% set ns.description = cfg.description %}
        {% endif %}
    {% endfor %}

<form method="POST" action="/admin/configuration/update" class="mt-4">

    <div class="mb-3">
        <label for="remote_pipeline" class="form-label"><strong>Remote Pipeline</strong></label>

        <select id="remote_pipeline" name="remote_pipeline" class="form-select" required>
            <option value="1" {% if ns.remote_pipeline == "1" %}selected{% endif %}>Enabled</option>
            <option value="0" {% if ns.remote_pipeline == "0" %}selected{% endif %}>Disabled</option>
        </select>

        <div class="form-text">
            {% if ns.description %}
                {{ ns.description }}
            {% else %}
                Enable or disable the remote pipeline execution.
            {% endif %}
        </div>
    </div>

    <button type="submit" class="btn btn-primary">Save Changes</button>
</form>


</div>

</body>
</html>
